<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Echo - 3am thought</title>
    <meta name="description" content="A minimal space where words make sounds in silence.">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital@1&family=Lora:ital@1&family=EB+Garamond:ital@1&family=Merriweather:ital@1&family=Vollkorn:ital@1&family=Source+Serif+Pro:ital@1&family=Noto+Serif:ital@1&family=Libre+Baskerville:ital@1&family=Cormorant+Garamond:ital@1&family=Bodoni+Moda:ital@1&family=PT+Serif:ital@1&family=Cinzel&family=Alice&family=Cardo:ital@1&family=Amiri:ital@1&family=Spectral:ital@1&family=Bitter:ital@1&family=Cormorant:ital@1&family=Lora:ital@1&display=swap" rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#333333">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://at-3am.web.app/thought">
    <meta property="og:title" content="Echo - 3am thought">
    <meta property="og:description" content="A minimal space where words make sounds in silence.">
    <meta property="og:image" content="preview.png">
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://at-3am.web.app/thought">
    <meta property="twitter:title" content="Echo - 3am thought">
    <meta property="twitter:description" content="A minimal space where words make sounds in silence.">
    <meta property="twitter:image" content="preview.png">
</head>
<body>
    <header>
        <div class="logo">
            <a href="/" style="text-decoration: none;">
                <span id="text-logo" style="font-style: italic; font-size: 16px; color: #1d1d1d; line-height: 1; display: block;">Echo</span>
            </a>
        </div>
        <nav>
            <a href="/thought" class="scramble-text">3am thought</a>
        </nav>
    </header>

    <div class="about-container">
        <p class="about-text" id="about-text">
            this started as a quiet random idea at 3am.<br>
            a little playground for calm, strange, lovely words, to feel okay for a moment.<br>
            visit anytime you need to feel lighter.<br>
            maybe you needed one today. I did too.
        </p>
        <div class="signature">
            ~ chandu machineni
            <a href="https://www.linkedin.com/in/chandu-machineni" class="linkedin" target="_blank" rel="noopener noreferrer">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                </svg>
            </a>
        </div>
    </div>

    <script src="scripts.js"></script>
    <script>
        // For changing background and colors
        document.addEventListener('DOMContentLoaded', () => {
            // Since this script runs on the about page, ensure we have the core functionality
            if (typeof updatePhrase !== 'function') {
                // If the main script doesn't load or doesn't have the function we need
                // We can implement a simplified version for the about page
                let pageIsVisible = true;
                let colorUpdateTimer = null;
                
                // Add page visibility detection
                document.addEventListener('visibilitychange', () => {
                    pageIsVisible = document.visibilityState === 'visible';
                    
                    if (pageIsVisible) {
                        // Resume updates when page becomes visible again
                        if (!colorUpdateTimer) updateColors();
                    } else {
                        // Clear any pending timers when page becomes hidden
                        if (colorUpdateTimer) {
                            clearTimeout(colorUpdateTimer);
                            colorUpdateTimer = null;
                        }
                    }
                });
                
                // Expanded array of pastel and soft colors for backgrounds
                const backgroundColors = [
                    // Soft pastels
                    '#F8F3EB', '#F3F8EB', '#EBF8F3', '#EBF3F8', '#F3EBF8', '#F8EBF3',
                    '#E6D7CF', '#D7E6CF', '#CFE6D7', '#CFD7E6', '#D7CFE6', '#E6CFD7',
                    '#F2D9D3', '#D9F2D3', '#D3F2D9', '#D3D9F2', '#D9D3F2', '#F2D3D9',
                    '#F8D8C8', '#C8F8D8', '#D8C8F8', '#F8C8D8', '#C8D8F8', '#D8F8C8',
                    
                    // Soft muted colors
                    '#E0E4CC', '#C7DEDE', '#DEC7DE', '#DEDEC7',
                    '#A7DBD8', '#E0E4CC', '#F38630', '#FA6900',
                    '#C8E6C9', '#A5D6A7', '#81C784', '#66BB6A',
                    '#FFF9C4', '#FFF59D', '#FFF176', '#FFEE58',
                    '#E1BEE7', '#CE93D8', '#BA68C8', '#AB47BC',
                    '#C5CAE9', '#9FA8DA', '#7986CB', '#5C6BC0',
                    
                    // Muted pastels
                    '#DCEDC8', '#FFD3B6', '#FFAAA5', '#FF8B94',
                    '#FDFDF5', '#FFF1D0', '#FFD3B6', '#FFAAA5', 
                    '#D8DCFF', '#AEADF0', '#C38D94', '#A76571',
                    '#D3F0EE', '#B1DDF1', '#A6B8F3', '#AEE1CD',
                    '#FFC5BF', '#FFD8BE', '#FFEBBE', '#ABE6BB',
                    
                    // Additional background colors
                    '#E9D1D0', '#ECE9E1', '#EFE6DD', '#EDEDE9',
                    '#F0E9E1', '#E5E2DF', '#DBD9D7', '#A39E93',
                    '#D7E9F7', '#EFEFEF', '#E7E0D6', '#BFB1A4',
                    '#F3E9E7', '#E6DBD0', '#D8B29C', '#C99C7A'
                ];
                
                let usedColors = new Set();
                
                // Calculate contrast between colors - WCAG formula
                const getContrastRatio = (color1, color2) => {
                    // Convert hex to RGB
                    const hexToRgb = (hex) => {
                        const r = parseInt(hex.substring(1, 3), 16);
                        const g = parseInt(hex.substring(3, 5), 16);
                        const b = parseInt(hex.substring(5, 7), 16);
                        return [r, g, b];
                    };

                    // Calculate relative luminance
                    const luminance = (rgb) => {
                        const [r, g, b] = rgb.map(v => {
                            v /= 255;
                            return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
                        });
                        return 0.2126 * r + 0.7152 * g + 0.0722 * b;
                    };

                    const rgb1 = hexToRgb(color1);
                    const rgb2 = hexToRgb(color2);
                    
                    const lum1 = luminance(rgb1);
                    const lum2 = luminance(rgb2);
                    
                    const brightest = Math.max(lum1, lum2);
                    const darkest = Math.min(lum1, lum2);
                    
                    return (brightest + 0.05) / (darkest + 0.05);
                };

                // Generate a contrasting text color for the background
                const getContrastingTextColor = (backgroundColor) => {
                    const darkColor = '#333333';
                    const lightColor = '#FFFFFF';
                    
                    const contrastWithDark = getContrastRatio(backgroundColor, darkColor);
                    const contrastWithLight = getContrastRatio(backgroundColor, lightColor);
                    
                    // WCAG AA requires contrast ratio of at least 4.5:1
                    return (contrastWithDark >= 4.5) ? darkColor : lightColor;
                };
                
                // Get random item from array that hasn't been used recently
                const getRandomUnused = (array, usedSet) => {
                    let availableItems = array.filter(item => !usedSet.has(item));
                    
                    // If all items have been used, reset
                    if (availableItems.length === 0) {
                        usedSet.clear();
                        availableItems = [...array];
                    }
                    
                    const randomIndex = Math.floor(Math.random() * availableItems.length);
                    const selectedItem = availableItems[randomIndex];
                    
                    // Track usage
                    usedSet.add(selectedItem);
                    // Reset tracking when we've used most items
                    if (usedSet.size > array.length * 0.7) {
                        usedSet.clear();
                }
                    
                    return selectedItem;
                };

                function updateColors() {
                    // Only proceed if page is visible
                    if (!pageIsVisible) return;
                    
                    // Get a random background color
                    const bgColor = getRandomUnused(backgroundColors, usedColors);
                    document.body.style.backgroundColor = bgColor;
                    
                    // Calculate contrasting text color based on WCAG guidelines
                    const textColor = getContrastingTextColor(bgColor);
                    
                    // Apply text color to all text elements
                    const textElements = document.querySelectorAll('.about-text, .signature, .linkedin');
                    textElements.forEach(el => {
                        el.style.color = textColor;
                    });
                    
                    // Store timer reference so we can cancel it if needed
                    clearTimeout(colorUpdateTimer);
                    colorUpdateTimer = setTimeout(updateColors, 20000); // Change every 20 seconds
                }
                
                // Initialize
                updateColors();
            }
        });
    </script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-analytics-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
        
        // Text logo font cycling - only on page load
        document.addEventListener('DOMContentLoaded', () => {
            const textLogo = document.getElementById('text-logo');
            
            // Array of available fonts (all in italic)
            const fonts = [
                'Playfair Display',
                'Lora',
                'EB Garamond',
                'Merriweather',
                'Crimson Pro',
                'Vollkorn',
                'Source Serif Pro',
                'Noto Serif',
                'Libre Baskerville',
                'Cormorant Garamond',
                'Bodoni Moda',
                'Yrsa',
                'DM Serif Display',
                'Taviraj',
                'Bree Serif',
                'PT Serif',
                'Cinzel',
                'Alice',
                'Cardo',
                'Newsreader',
                'Amiri',
                'Castoro',
                'Prata',
                'Linden Hill',
                'Libre Caslon Text',
                'Nanum Myeongjo',
                'Gentium Book Basic',
                'Petrona',
                'Rosarivo',
                'Spectral',
                'Sura',
                'Arvo',
                'Abhaya Libre',
                'Roboto Serif',
                'Fraunces',
                'Bitter',
                'Cormorant',
                'Brygada 1918',
                'Faustina',
                'Lora',
                'Headland One',
                'Italiana',
                'Literata',
                'Solway',
                'Cantata One',
                'Markazi Text',
                'Radley',
                'Manuale',
                'Lustria',
                'Zilla Slab'
            ];
            
            // Choose a random font on page load
            const randomIndex = Math.floor(Math.random() * fonts.length);
            textLogo.style.fontFamily = fonts[randomIndex];
        });
    </script>
</body>
</html> 
